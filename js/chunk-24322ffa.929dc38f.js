(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24322ffa"],{"00db":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return h}));var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sh-upload"},[s("Input",{staticStyle:{display:"none"},attrs:{type:"text",value:e.value}}),e._l(e.uploadList,(function(t,r){return s("div",{key:r,staticClass:"uploadlist",style:e.upStyles},["finished"===t.status?[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.$config.baseUrl.dev+t.response.content,expression:"$config.baseUrl.dev + item.response.content"}]}),s("div",{staticClass:"uploadlistcover"},[s("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(s){return e.handleView(e.$config.baseUrl.dev+t.response.content)}}}),s("Icon",{attrs:{type:"ios-trash-outline"},on:{click:function(s){return e.handleRemove(t)}}})],1)]:[t.showProgress?s("Progress",{attrs:{percent:t.percentage,showInfo:!1}}):e._e()]],2)})),s("div",{directives:[{name:"show",rawName:"v-show",value:e.uploadList.length<e.filelength,expression:"uploadList.length < filelength"}]},[s("Upload",{ref:"upload",staticClass:"imageupload",attrs:{disabled:e.disabled,multiple:e.multiple,name:e.filename,"show-upload-list":!1,"on-success":e.handleSuccess,"on-error":e.handleError,accept:e.uploadaccept,format:e.messageAll.fileFormat,"before-upload":e.handleBeforeUpload,action:e.baseUpload}},[s("div",{staticClass:"sh-uploadwrapper",style:e.upStyles},[s("Icon",{attrs:{type:"md-camera"}})],1)])],1),s("Modal",{attrs:{title:"查看图片",footer:null},on:{"on-cancel":e.handleCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imgUrl,expression:"imgUrl"}],staticStyle:{width:"100%"}}):e._e()])],2)},i=[],n=(s("3721"),s("3221"),s("310b"),s("8445"),s("dd4d"),s("d104"),s("1ff6"),{props:{multiple:Boolean,disabled:Boolean,value:{type:String,default:""},filename:{type:String,default:"image"},fileaccept:{type:String,default:"jpg,jpeg,png"},filelength:{type:Number,default:1},width:{type:Number,default:80},height:{type:Number,default:80}},name:"sh-img-upload",data:function(){return{baseUpload:this.$config.baseUrl.dev+"/putFile",imgName:"",imgUrl:"",visible:!1,resultUrl:"",uploadList:[]}},created:function(){},mounted:function(){},computed:{upStyles:function(){return{width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}},messageAll:function(){return{limitBytes:2097152,fileSizeError:"图片大小不能超过2M",fileFormat:this.fileaccept.split(","),fileTypeError:"图片格式不正确，请上传"+this.fileaccept+"文件"}},uploadaccept:function(){var e=[];return this.fileaccept.split(",").forEach((function(t){e.push("."+t)})),e.join(",")}},methods:{handleView:function(e){this.imgUrl=e,this.visible=!0},handleCancel:function(){this.visible=!1},handleRemove:function(e){var t=this,s=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(s.indexOf(e),1),this.$nextTick((function(){t.uploadList=[],t.resultUrl=""}))},handleSuccess:function(e,t){var s=this;"200"==e.status?this.$nextTick((function(){s.uploadList=s.$refs.upload.fileList,s.resultUrl=s.uploadList[0].response.content})):0==e.status?this.$nextTick((function(){s.uploadList=s.$refs.upload.fileList,s.resultUrl=e.path})):(this.$nextTick((function(){s.$refs.upload.fileList=[],s.uploadList=[],s.resultUrl=""})),this.msgwarning({content:e.content?e.content:"上传失败！"}))},handleError:function(e,t,s){this.msgerror("上传失败！")},handleBeforeUpload:function(e){var t=e.name.substr(e.name.lastIndexOf(".")).toLowerCase(),s=t.split(".")[1],r=this.messageAll.fileFormat,i=r.some((function(e){return e===s}));if(""!=this.fileaccept&&!i)return this.msginfo({content:this.messageAll.fileTypeError}),!1;var n=e.size<this.messageAll.limitBytes;return!!n||(this.msginfo({content:this.messageAll.fileSizeError}),!1)},handleUpload:function(e){var t=this,s=new FormData;s.append("file",e),uploadImgOne(s).then((function(e){t.handleSuccess(e)}))}},watch:{value:{handler:function(e,t){e&&(this.uploadList=[{status:"finished",response:{content:e}}],this.resultUrl=e)},immediate:!0},resultUrl:function(e){this.$emit("input",e)}}}),a=n,l=(s("4e1e"),s("5d22")),o=Object(l["a"])(a,r,i,!1,null,"365f43f6",null),u=o.exports,c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sh-upload"},[s("Input",{staticStyle:{display:"none"},attrs:{type:"text",value:e.inputVal}}),e.uploadList.length>0?e._l(e.uploadList,(function(t,r){return s("div",{key:r,staticClass:"uploadlist uploadlistfile",style:e.upStyles},["finished"===t.status?[s("div",{staticClass:"uploadlist-item"},[s("div",{staticClass:"title"},[e._v(e._s(t.response.content))]),s("Icon",{attrs:{type:"ios-trash-outline",title:"删除文件",size:"18"},on:{click:function(s){return e.handleRemove(t)}}})],1)]:[t.showProgress?s("Progress",{attrs:{percent:t.percentage,showInfo:!1}}):e._e()]],2)})):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.uploadList.length<e.maxfilelength,expression:"uploadList.length < maxfilelength"}]},[s("Upload",{ref:"upload",staticClass:"fileupload",attrs:{disabled:e.disabled,multiple:e.multiple,name:e.filename,"show-upload-list":!1,"on-success":e.handleSuccess,"on-error":e.handleError,accept:e.uploadaccept,format:e.messageAll.fileFormat,"before-upload":e.handleBeforeUpload,action:e.baseUpload}},[s("div",{staticClass:"sh-uploadwrapper",style:e.upStyles},[s("Icon",{attrs:{type:"md-add"}})],1)])],1)],2)},d=[],f={props:{multiple:Boolean,disabled:Boolean,value:{type:[String,Array],default:""},filename:{type:String,default:"image"},fileaccept:{type:String,default:""},maxfilelength:{type:Number,default:3},width:{type:Number,default:60},height:{type:Number,default:60}},name:"sh-file-upload",data:function(){return{baseUpload:this.$config.baseUrl.dev+"/putFile",visible:!1,uploadList:[],resultUrl:[]}},created:function(){},mounted:function(){},computed:{inputVal:function(){return this.resultUrl.length>0?JSON.stringify(this.resultUrl):void 0},upStyles:function(){return{minWidth:"".concat(this.width,"px"),minHeight:"".concat(this.height,"px")}},messageAll:function(){return{limitBytes:20971520,fileSizeError:"文件大小不能超过20M",fileType:this.fileaccept.split(","),fileTypeError:"文件格式不正确，请上传"+this.fileaccept+"文件"}},uploadaccept:function(){var e=[];return this.fileaccept.split(",").forEach((function(t){e.push("."+t)})),e.join(",")}},methods:{handleRemove:function(e){var t=this.$refs.upload.fileList,s=t.indexOf(e);this.$refs.upload.fileList.splice(s,1),this.uploadList.splice(s,1),this.resultUrl.splice(s,1)},handleBeforeUpload:function(e){var t=e.name.substr(e.name.lastIndexOf(".")).toLowerCase(),s=t.split(".")[1],r=this.messageAll.fileType,i=r.some((function(e){return e===s}));if(""!=this.fileaccept&&!i)return this.msginfo({content:this.messageAll.fileTypeError}),!1;var n=e.size<this.messageAll.limitBytes;return!!n||(this.msginfo({content:this.messageAll.fileSizeError}),!1)},handleSuccess:function(e,t){var s=this;"200"==e.status?this.$nextTick((function(){s.uploadList=s.$refs.upload.fileList,s.resultUrl=[],s.uploadList.forEach((function(e){s.resultUrl.push(e.response.content)}))})):this.msgwarning({content:e.content?e.content:"上传失败！"})},handleError:function(e,t,s){this.msgerror("上传失败！")},blur:function(){this.$refs.input.blur()}},watch:{value:{handler:function(e,t){var s=this;e&&(this.uploadList=[],e.forEach((function(e){s.uploadList.push({status:"finished",response:{content:e}})})),this.resultUrl=e)},immediate:!0},resultUrl:function(e){this.$emit("input",e)}}},p=f,m=(s("a2e0"),Object(l["a"])(p,c,d,!1,null,"492600f5",null)),h=m.exports},"0477":function(e,t,s){},"047c":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sh-content"},[s("div",{staticClass:"container"},[s("Row",{staticStyle:{"align-items":"stretch"},attrs:{type:"flex"}},[s("Col",{staticClass:"sh_userinfo_side",attrs:{lg:5,md:6,sm:24,xs:24}},[s("Card",{attrs:{"dis-hover":"",bordered:!1}},[s("div",{staticClass:"userimg py-4"},[e.userAvatar?s("Avatar",{attrs:{src:e.userAvatar,size:130,alt:"头像"}}):s("Avatar",{staticStyle:{"background-color":"#fde3cf",color:"#f56a00"},attrs:{icon:"md-person",size:130,alt:"头像"}}),s("div",{staticClass:"user_realname"},[e._v(e._s(e.userName))])],1),s("div",{staticClass:"py-5"},[s("router-link",{attrs:{to:{name:"userInfo"}}},[s("Button",{attrs:{type:"primary",long:""}},[e._v("个人信息 "),s("Icon",{attrs:{type:"md-arrow-round-forward"}})],1)],1),s("br"),s("router-link",{attrs:{to:{name:"userPassmodify"}}},[s("Button",{staticClass:"mt-4",attrs:{ghost:"",long:""}},[e._v("修改密码 "),s("Icon",{attrs:{type:"md-arrow-round-forward"}})],1)],1)],1)])],1),s("Col",{staticClass:"sh_userinfo_wrap py-5",attrs:{lg:19,md:18,sm:24,xs:24}},[s("Card",{attrs:{"dis-hover":"",bordered:!1}},[s("ShLoading",{attrs:{loading:e.loading}}),s("div",{staticClass:"userhead"},[s("h2",[e._v("登录账号：")]),s("h3",[e._v(e._s(e.userName))])]),s("UserInfoForm",{staticStyle:{"max-width":"700px",margin:"20px auto"},on:{"on-success-valid":e.handleSubmit,"on-cancel":e.handleCancel}})],1)],1)],1)],1)])},i=[],n=s("efe2"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Form",{ref:"userInfoForm",staticClass:"userInfoForm",attrs:{model:e.userInfoForm,rules:e.userInfoRules,"label-width":120,"label-colon":""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit(t)}}},[s("FormItem",{attrs:{label:"头像",prop:"userAvatar"}},[s("ShImgUpload",{model:{value:e.userInfoForm.userAvatar,callback:function(t){e.$set(e.userInfoForm,"userAvatar","string"===typeof t?t.trim():t)},expression:"userInfoForm.userAvatar"}})],1),s("FormItem",{attrs:{label:"姓名",prop:"userRealName"}},[s("Input",{directives:[{name:"input-filter",rawName:"v-input-filter:trim",arg:"trim"}],attrs:{size:e.size,placeholder:"请输入姓名"},model:{value:e.userInfoForm.userRealName,callback:function(t){e.$set(e.userInfoForm,"userRealName","string"===typeof t?t.trim():t)},expression:"userInfoForm.userRealName"}})],1),s("FormItem",{attrs:{label:"性别",prop:"userSex"}},[s("RadioGroup",{model:{value:e.userInfoForm.userSex,callback:function(t){e.$set(e.userInfoForm,"userSex","string"===typeof t?t.trim():t)},expression:"userInfoForm.userSex"}},[s("Radio",{staticClass:"mr-4",attrs:{label:"1"}},[e._v("男")]),s("Radio",{staticClass:"mr-4",attrs:{label:"2"}},[e._v("女")])],1)],1),s("FormItem",{attrs:{label:"学校",prop:"userSchool"}},[s("Select",{attrs:{size:e.size,placeholder:"请选择学校"},model:{value:e.userInfoForm.userSchool,callback:function(t){e.$set(e.userInfoForm,"userSchool","string"===typeof t?t.trim():t)},expression:"userInfoForm.userSchool"}},[s("Option",{attrs:{value:"1"}},[e._v("1")]),s("Option",{attrs:{value:"2"}},[e._v("2")])],1)],1),s("FormItem",{attrs:{label:"专业",prop:"userMajor"}},[s("Select",{attrs:{size:e.size,placeholder:"请选择专业"},model:{value:e.userInfoForm.userMajor,callback:function(t){e.$set(e.userInfoForm,"userMajor","string"===typeof t?t.trim():t)},expression:"userInfoForm.userMajor"}},[s("Option",{attrs:{value:"1"}},[e._v("1")]),s("Option",{attrs:{value:"2"}},[e._v("2")])],1)],1),s("FormItem",{attrs:{label:"手机号",prop:"userTelphone"}},[s("InputNumber",{staticClass:"w-100",attrs:{max:19999999999,min:0,size:e.size,placeholder:"请输入手机号"},model:{value:e.userInfoForm.userTelphone,callback:function(t){e.$set(e.userInfoForm,"userTelphone","string"===typeof t?t.trim():t)},expression:"userInfoForm.userTelphone"}})],1),s("FormItem",[s("Button",{attrs:{type:"primary",size:e.size},on:{click:e.handleSubmit}},[e._v("确定")]),s("Button",{attrs:{type:"default",size:e.size},on:{click:e.handleCancel}},[e._v("取消")])],1)],1)],1)},l=[],o=(s("8445"),s("0f1b"),s("00db")),u=(s("0740"),{name:"user-info-form",props:{size:{type:String,default:"default"},formfields:{type:Object,default:function(){}}},components:{ShImgUpload:o["b"]},data:function(){return{userInfoForm:{userAvatar:null,userRealName:null,userSex:null,userSchool:null,userMajor:null,userTelphone:null}}},computed:{userInfoRules:function(){return{userAvatar:[{required:!0,type:"string",message:"请选择头像",trigger:"change"}],userRealName:[{required:!0,type:"string",message:"请输入姓名",trigger:"blur"},{validator:this.isuserRealname,trigger:"blur"}],userSex:[{required:!0,type:"string",message:"请选择性别",trigger:"change"}],userSchool:[{required:!0,type:"string",message:"请选择学校",trigger:"change"}],userMajor:[{required:!0,type:"string",message:"请选择专业",trigger:"change"}],userTelphone:[{required:!0,type:"number",message:"请输入手机号",trigger:"blur"},{validator:this.ismobile,trigger:"blur"}]}}},mounted:function(){this.readEditFields()},methods:{readEditFields:function(){var e=this;if(void 0==this.formfields)return!1;Object.keys(this.userInfoForm).forEach((function(t){e.formfields[t]&&(e.userInfoForm[t]=e.formfields[t])}))},handleSubmit:function(){var e=this;return e.$refs.userInfoForm.validate((function(t){t?e.$emit("on-success-valid",e.userInfoForm):e.$emit("on-fail-valid")})),!1},handleCancel:function(){this.$emit("on-cancel"),this.resetForm()},resetForm:function(){this.$refs.userInfoForm.resetFields()}}}),c=u,d=s("5d22"),f=Object(d["a"])(c,a,l,!1,null,null,null),p=f.exports,m=s("7736"),h={name:"userInfo",components:{UserInfoForm:p},data:function(){return{loading:!1}},computed:{userName:function(){return this.$store.state.user.userName||"-"},userAvatar:function(){return this.$store.state.user.userAvatar}},created:function(){},mounted:function(){},methods:Object(n["a"])(Object(n["a"])({},Object(m["b"])(["editUserInfo"])),{},{handleSubmit:function(e){var t=this;t.loading=!0,t.editUserInfo(e).then((function(e){t.loading=!1,t.msgsuccess("修改成功！")}))},handleCancel:function(){this.$emit("handleCancel")}}),watch:{}},g=h,v=(s("3ebd"),Object(d["a"])(g,r,i,!1,null,null,null));t["default"]=v.exports},"0740":function(e,t,s){},"3ebd":function(e,t,s){"use strict";s("0477")},"3fed":function(e,t,s){},"4e1e":function(e,t,s){"use strict";s("3fed")},a2e0:function(e,t,s){"use strict";s("b5f4")},b5f4:function(e,t,s){}}]);