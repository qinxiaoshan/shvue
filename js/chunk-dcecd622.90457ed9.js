(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dcecd622"],{"066a":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sh-content"},[n("div",{staticClass:"container"},[n("Card",{staticClass:"sh-ghost-card sh-coursemain-card",attrs:{title:"题库"}},[n("div",{attrs:{slot:"extra"},slot:"extra"},[n("Form",{attrs:{inline:""}},[n("FormItem",{staticClass:"mb-0 selectFormItem"},[n("Select",{attrs:{options:e.questionTypeOptions,placeholder:"请选择题型"},model:{value:e.searchtype,callback:function(t){e.searchtype="string"===typeof t?t.trim():t},expression:"searchtype"}},e._l(e.questionTypeOptions,(function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),n("FormItem",{staticClass:"mb-0"},[n("Input",{directives:[{name:"input-filter",rawName:"v-input-filter"}],attrs:{type:"text",search:"",placeholder:"请输入题干名称",clearable:""},model:{value:e.searchname,callback:function(t){e.searchname="string"===typeof t?t.trim():t},expression:"searchname"}})],1),n("FormItem",{staticClass:"mb-0 mr-0"},[n("Button",{attrs:{type:"primary"},on:{click:e.handleExamQuestionCreate}},[e._v("添加试题")])],1)],1)],1),n("div",{staticClass:"mt-3"},[n("examQuestionList",{ref:"examQuestionList",attrs:{searchname:e.searchname,searchtype:e.searchtype}})],1)])],1)])},a=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Row",[n("Col",{attrs:{lg:6,md:8,xs:24}},[n("ShLoading",{attrs:{loading:e.moduleloading}}),n("Menu",{ref:"examQuestionMenu",staticClass:"examQuestionMenu",attrs:{accordion:"","active-name":e.activeName,"open-names":e.openedNames},on:{"on-select":e.onSelect}},[e._l(e.moduleSourse,(function(t,o){return[n("Submenu",{key:o,attrs:{name:t.moduleId}},[n("template",{slot:"title"},[e._v(e._s(t.moduleName))]),e._l(e.moduleThemeList(t.moduleId),(function(t,o){return[n("menu-item",{key:o,attrs:{name:t.themeId}},[e._v(e._s(o+1)+". "+e._s(t.themeName))])]}))],2)]}))],2)],1),n("Col",{attrs:{lg:18,md:16,xs:24}},[n("ShTable",{ref:"examQuestionTable",attrs:{height:"auto",dataSourse:e.questionSearchData,columns:e.columns,loading:e.dataloading},scopedSlots:e._u([{key:"questionType",fn:function(t){var o=t.row;return[1==o.questionType?[n("Tag",{attrs:{color:"volcano"}},[e._v("单选题")])]:2==o.questionType?[n("Tag",{attrs:{color:"orange"}},[e._v("多选题")])]:3==o.questionType?[n("Tag",{attrs:{color:"cyan"}},[e._v("判断题")])]:4==o.questionType?[n("Tag",{attrs:{color:"blue"}},[e._v("简答题")])]:5==o.questionType?[n("Tag",{attrs:{color:"geekblue"}},[e._v("论述题")])]:[n("Tag",{attrs:{color:"default"}},[e._v(e._s(o.questionType))])]]}},{key:"handle",fn:function(t){var o=t.row;return[n("Button",{attrs:{type:"default",size:"small",row:o},nativeOn:{click:function(t){return e.handleExamQuestionEdit(o)}}},[e._v("查看")])]}}])})],1)],1),n("ExamQuestionModal",{attrs:{title:e.modalTitle,formfields:e.editItem,loading:e.modalLoading,visible:e.modalVisible,formModuleSourse:e.moduleSourse,formThemeSourse:e.themeSourse},on:{handleCancel:e.handleCancel,handleOk:e.handleOk}})],1)},s=[],r=n("efe2"),u=(n("3721"),n("6706"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Modal",{attrs:{width:"900px",value:e.visible,title:e.title,"mask-closable":!1,loading:!0,"footer-hide":""},on:{"on-cancel":e.handleCancel}},[n("ShLoading",{attrs:{loading:e.loading}}),e.visible?n("ExamQuestionForm",{staticStyle:{"max-width":"700px",margin:"20px auto"},attrs:{formfields:e.formfields,formModuleSourse:e.formModuleSourse,formThemeSourse:e.formThemeSourse},on:{"on-success-valid":e.handleSubmit,"on-cancel":e.handleCancel}}):e._e()],1)],1)}),l=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Form",{ref:"examQuestionForm",staticClass:"examQuestionForm",attrs:{model:e.examQuestionForm,rules:e.examQuestionRules,"label-width":140,"label-colon":""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit(t)}}},[n("FormItem",{attrs:{label:"题干",prop:"questionName"}},[n("Input",{directives:[{name:"input-filter",rawName:"v-input-filter:trim",arg:"trim"}],attrs:{size:e.size,placeholder:"请输入题干"},model:{value:e.examQuestionForm.questionName,callback:function(t){e.$set(e.examQuestionForm,"questionName","string"===typeof t?t.trim():t)},expression:"examQuestionForm.questionName"}})],1),n("FormItem",{attrs:{label:"教学模块",prop:"questionTeachingModule"}},[n("Select",{attrs:{size:e.size,placeholder:"请选择教学模块"},model:{value:e.examQuestionForm.questionTeachingModule,callback:function(t){e.$set(e.examQuestionForm,"questionTeachingModule","string"===typeof t?t.trim():t)},expression:"examQuestionForm.questionTeachingModule"}},[e._l(e.formModuleSourse,(function(t){return[n("Option",{key:t.moduleId,attrs:{value:t.moduleId}},[e._v(e._s(t.moduleName))])]}))],2)],1),n("FormItem",{attrs:{label:"教学主题",prop:"questionTeachingTheme"}},[n("Select",{attrs:{size:e.size,placeholder:"请选择教学主题"},model:{value:e.examQuestionForm.questionTeachingTheme,callback:function(t){e.$set(e.examQuestionForm,"questionTeachingTheme","string"===typeof t?t.trim():t)},expression:"examQuestionForm.questionTeachingTheme"}},[e._l(e.formThemeSourse,(function(t){return[n("Option",{key:t.themeId,attrs:{value:t.themeId}},[e._v(e._s(t.themeName))])]}))],2)],1),n("FormItem",{attrs:{label:"请选择题型",prop:"questionType"}},[n("RadioGroup",{attrs:{size:"small"},model:{value:e.examQuestionForm.questionType,callback:function(t){e.$set(e.examQuestionForm,"questionType","string"===typeof t?t.trim():t)},expression:"examQuestionForm.questionType"}},[n("Radio",{staticClass:"mr-3",attrs:{label:1,border:""}},[e._v("单选题")]),n("Radio",{staticClass:"mr-3",attrs:{label:2,border:""}},[e._v("多选题")]),n("Radio",{staticClass:"mr-3",attrs:{label:3,border:""}},[e._v("判断题")]),n("Radio",{staticClass:"mr-3",attrs:{label:4,border:""}},[e._v("简答题")]),n("Radio",{staticClass:"mr-3",attrs:{label:5,border:""}},[e._v("论述题")])],1)],1),n("FormItem",{attrs:{label:"排序",prop:"questionSort"}},[n("InputNumber",{directives:[{name:"input-filter",rawName:"v-input-filter:trim",arg:"trim"}],staticClass:"w-100",attrs:{size:e.size,placeholder:"请输入排序"},model:{value:e.examQuestionForm.questionSort,callback:function(t){e.$set(e.examQuestionForm,"questionSort","string"===typeof t?t.trim():t)},expression:"examQuestionForm.questionSort"}})],1),n("FormItem",[n("Button",{attrs:{type:"primary",size:e.size},on:{click:e.handleSubmit}},[e._v("确定")]),n("Button",{attrs:{type:"default",size:e.size},on:{click:e.handleCancel}},[e._v("取消")])],1)],1)],1)},d=[],c=(n("8445"),n("0f1b"),n("0740"),{name:"exam-question-form",props:{size:{type:String,default:"default"},formfields:{type:Object,default:function(){}},formModuleSourse:{type:Array,default:function(){return[]}},formThemeSourse:{type:Array,default:function(){return[]}}},components:{},data:function(){return{examQuestionForm:{questionName:null,questionTeachingModule:null,questionTeachingTheme:null,questionType:null,questionSort:1}}},computed:{examQuestionRules:function(){return{questionName:[{required:!0,type:"string",message:"请输入题干",trigger:"blur"}],questionTeachingModule:[{required:!0,type:"number",message:"请选择教学模块",trigger:"change"}],questionTeachingTheme:[{required:!0,type:"number",message:"请选择教学主题",trigger:"change"}],questionType:[{required:!0,type:"number",message:"请选择题型",trigger:"change"}],questionSort:[{required:!0,type:"number",message:"请输入排序",trigger:"blur"}]}}},mounted:function(){this.readEditFields()},methods:{readEditFields:function(){var e=this;if(void 0==this.formfields)return!1;Object.keys(this.examQuestionForm).forEach((function(t){e.formfields[t]&&(e.examQuestionForm[t]=e.formfields[t])}))},handleSubmit:function(){var e=this;return e.$refs.examQuestionForm.validate((function(t){t?e.$emit("on-success-valid",e.examQuestionForm):e.$emit("on-fail-valid")})),!1},handleCancel:function(){this.$emit("on-cancel"),this.resetForm()},resetForm:function(){this.$refs.examQuestionForm.resetFields()}}}),f=c,h=n("5d22"),p=Object(h["a"])(f,m,d,!1,null,null,null),g=p.exports,x={name:"exam-question-modal",props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},formfields:{type:Object,default:function(){}},formModuleSourse:{type:Array,default:function(){return[]}},formThemeSourse:{type:Array,default:function(){return[]}}},components:{ExamQuestionForm:g},data:function(){return{}},methods:{handleSubmit:function(e){this.$emit("handleOk",e)},handleCancel:function(){this.$emit("handleCancel")}}},v=x,y=Object(h["a"])(v,u,l,!1,null,"23c492ed",null),b=y.exports,S=n("7736"),C={name:"exam-question-list",props:{searchtype:{type:[String,Number],default:null},searchname:{type:String,default:null}},components:{ExamQuestionModal:b},data:function(){return{activeName:null,openedNames:[1],modalVisible:!1,modalLoading:!1,editItem:null,moduleloading:!1,moduleSourse:[],themeSourse:[],dataloading:!1,dataSourse:[],pagination:{pageSize:8}}},computed:{modalTitle:function(){return this.editItem?"编辑试题":"创建试题"},moduleThemeList:function(){return function(e){return this.themeSourse.filter((function(t){return t.themeModule==e}))}},columns:function(){return[{title:"序号",key:"questionId",width:80,align:"center"},{title:"题干",key:"questionName",align:"left"},{title:"题型",key:"questionType",width:100,align:"center",slot:"questionType"},{title:"操作",key:"handle",align:"center",width:100,slot:"handle"}]},questionSearchData:function(){var e=this,t=this.dataSourse.filter((function(t){return(!e.searchname||-1!=t.questionName.indexOf(e.searchname))&&(!e.searchtype||t.questionType==e.searchtype)}));return t}},mounted:function(){this.getCourseCenterExamQuestionModules(),this.getCourseCenterExamQuestionList()},methods:Object(r["a"])(Object(r["a"])({},Object(S["b"])(["getStoreCourseCenterExamQuestionModules","getStoreCourseCenterExamQuestionList","setStoreCourseCenterExamQuestionAdd","setStoreCourseCenterExamQuestionEdit","setStoreCourseCenterExamQuestionDelete"])),{},{getCourseCenterExamQuestionModules:function(){var e=this;e.moduleloading=!0,e.moduleSourse=[],e.getStoreCourseCenterExamQuestionModules({}).then((function(t){e.moduleloading=!1,e.moduleSourse=t.moduleList,e.themeSourse=t.themeList,e.openedNames=[e.moduleSourse[0].moduleId],e.activeName=e.themeSourse[0].themeId}))},getCourseCenterExamQuestionList:function(){var e=this;e.dataloading=!0,e.dataSourse=[],e.getStoreCourseCenterExamQuestionList({}).then((function(t){e.dataloading=!1,e.dataSourse=t.dataList}))},onSelect:function(e){},handleExamQuestionCreate:function(){this.editItem=null,this.modalVisible=!0},handleExamQuestionEdit:function(e){this.editItem=e,this.modalVisible=!0},handleOk:function(e){var t=this;t.modalLoading=!0,t.editItem?t.setStoreCourseCenterExamQuestionEdit(e).then((function(e){t.modalLoading=!1,t.modalVisible=!1,t.msgsuccess("修改成功！")})):t.setStoreCourseCenterExamQuestionAdd(e).then((function(e){t.modalLoading=!1,t.modalVisible=!1,t.msgsuccess("添加成功！")}))},handleCancel:function(){this.modalVisible=!1},handleExamQuestionClose:function(e){var t=this;t.$Modal.confirm({title:"您确定要删除试题吗？",content:"该操作将无法撤回",onOk:function(){t.dataloading=!0,t.setStoreCourseCenterExamQuestionDelete(e).then((function(e){t.dataloading=!1,t.msginfo("删除成功！")}))},onCancel:function(){}})}}),watch:{activeName:function(){var e=this;this.$nextTick((function(){e.$refs.examQuestionMenu.updateActiveName()}))},openedNames:function(){var e=this;this.$nextTick((function(){e.$refs.examQuestionMenu.updateOpened()}))}}},Q=C,q=(n("3266"),Object(h["a"])(Q,i,s,!1,null,null,null)),T=q.exports,F={name:"exam-question",components:{examQuestionList:T},data:function(){return{searchtype:null,searchname:null}},computed:{questionTypeOptions:function(){return[{value:0,label:"-- 全部题型 --"},{value:1,label:"单选题"},{value:2,label:"多选题"},{value:3,label:"判断题"},{value:4,label:"简答题"},{value:5,label:"论述题"}]}},methods:{handleExamQuestionCreate:function(){this.$refs.examQuestionList.handleExamQuestionCreate()}}},_=F,k=Object(h["a"])(_,o,a,!1,null,"ed5bcfb2",null);t["default"]=k.exports},"0740":function(e,t,n){},3266:function(e,t,n){"use strict";n("e12a")},e12a:function(e,t,n){}}]);